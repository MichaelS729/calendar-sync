#title
  %h2= @event.name

- if @event.image.file?
  #image
    = image_tag @event.image.url(:original)
    %br

#time
  .left
    %p Time
  .right
    %p
      = @time_period
  %div{:style=>"clear:both;"}

#location
  %p{style: 'font-weight:600;'} Location
  %p#loco
    = @event.location
  %div#map


#description
  %p{style: 'font-weight:600;'} About
  %div
    != @event.description

#find_us
  %p{style: 'font-weight:600;'} How to find us
  %div
    != @event.how_to_find_us

#rsvp
  %p.field Check out who's going!
  %table#attendees
    %thead
      %tr
        %th Name
    %tbody
      - @non_anon_guests_by_first_name.each do |guest|
        %tr
          %td= guest.first_name
  %br

  %div{style: 'font-weight:600;'} RSVP Now!
  %div (You will be added to our mailing list. Your information will not be shared.)
  %br
  %i * denotes a required field
  = form_tag guests_path, id: 'rsvp_guest', remote: true, format: :js do
    -# this path does an ajax post to the calendar controller action create_guest
    = hidden_field_tag :event_id, @event.id

    = text_field :guest, :first_name, class: 'edit_text_field', placeholder: '*First Name', label: 'first_name'
    = text_field :guest, :last_name, class: 'edit_text_field', placeholder: '*Last Name', label: 'last_name'
    = text_field :guest, :email, class: 'edit_text_field', placeholder: '*Email', label: 'email'
    = text_field :guest, :phone, class: 'edit_text_field', placeholder: 'Phone Number', label: 'phone'
    = text_field :guest, :address, class: 'edit_text_field', placeholder: 'Address', label: 'address'
    = text_field :guest, :city, class: 'edit_text_field', placeholder: 'City', label: 'city'
    = text_field :guest, :state, class: 'edit_text_field', placeholder: 'State', label: 'state'
    = text_field :guest, :zip, class: 'edit_text_field', placeholder: 'Zip', label: 'zip'

    %p*Do you want to remain anonymous to other guests?
    %div{style: 'padding: 0 15% 0 15%;'}
      = hidden_field :guest, :is_anon, :value => nil
      %div{:style=>"float:left; position:relative;"}
        %label{for: 'guest_is_anon'}
          = radio_button :guest, :is_anon, true, style: 'margin: 0;'
          &nbsp;Yes
      %div{:style=>"float:right; position:relative;"}
        %label{for: 'guest_is_anon'}
          = radio_button :guest, :is_anon, false, style: 'margin: 0;'
          &nbsp;No
      %div{:style=>"clear:both;"}
    %div{style: 'float:left; position:relative; left:50%;'}
      %div{style: 'float:left; position:relative; left:-50%;'}
        %p= submit_tag "RSVP", :class=>'button'
    %br

- if user_signed_in?
  %br
  %br
  %div
    %div{:style=>"float:left;"}
      = form_tag edit_event_path(@event), method: 'get', id: 'edit_event', format: :js, remote: true do
        -# this path does an ajax get to the event controller action "edit"
        %p= submit_tag 'Edit', class: 'button'
    %div{:style=>"float:right;"}
      =form_tag event_path(@event), id: 'delete_event', format: :js, remote: true, method: 'delete' do
        -# this path does an ajax delete to the events controller action destroy
        = hidden_field_tag :event_id, @event.id
        %p= submit_tag 'Delete', class: 'button', confirm: 'Are you sure?'
    %div{:style=>"clear:both;"}
